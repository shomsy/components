<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>ContainerConfig.php Documentation</title>
    <link href="../styles.css" rel="stylesheet">
</head>
<body>
<div class="layout">
    <aside class="sidebar">
        <div class="brand"><a href="../index.html">Container Docs</a></div>
        <nav>
            <div class="nav-section">
                <h3 class="nav-title">ContainerConfig.php</h3>
                <ul class="nav-list">
                    <li><a href="#quick-summary">Quick Summary</a></li>
                    <li><a href="#terminology">Terminology</a></li>
                    <li><a href="#think-of-it">Think Of It</a></li>
                    <li><a href="#story-example">Story Example</a></li>
                    <li><a href="#for-dummies">For Dummies</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="#architecture-role">Architecture Role</a></li>
                    <li><a href="#risks-trade-offs">Risks & Trade-offs</a></li>
                    <li><a href="#related-files-folders">Related Components</a></li>
                </ul>
            </div>
        </nav>
    </aside>

    <main class="content">
        <div class="hero">
            <h1>ContainerConfig.php</h1>
            <p>An immutable configuration class that manages container settings and provides a fluent API for configuration composition.</p>
            <div class="meta">
                <strong>File Path:</strong> Core/ContainerConfig.php<br>
                <strong>Folder Context:</strong> Container runtime configuration<br>
                <strong>Updated:</strong> 2026-01-09
            </div>
        </div>

        <section id="quick-summary" class="section content-card">
            <h2>Quick Summary</h2>
            <p>ContainerConfig.php provides an immutable configuration container that holds key-value settings for the container's operation. It offers a fluent interface for merging configurations and accessing settings with optional defaults, ensuring configuration management is both safe and convenient.</p>
            <p>This class exists because containers need configurable behavior without runtime mutation risks. Immutability prevents accidental configuration changes during operation.</p>
            <h3>For Humans: What This Means</h3>
            <p>This is like a secure settings box for your container. Once you set the configuration, it can't be accidentally changed later. It's the container's way of remembering "these are my settings" in a way that can't be tampered with during operation.</p>
        </section>

        <section id="terminology" class="section content-card">
            <h2>Terminology</h2>
            <ul>
                <li><strong>Immutable Configuration:</strong> Settings that cannot be changed after creation</li>
                <li><strong>Fluent Interface:</strong> Method chaining that allows readable configuration composition</li>
                <li><strong>Configuration Merging:</strong> Combining multiple configuration sources into one</li>
                <li><strong>Default Values:</strong> Fallback values when requested settings don't exist</li>
                <li><strong>Composition Root:</strong> The place where object graphs are assembled and configured</li>
            </ul>
            <h3>For Humans: What This Means</h3>
            <p>Immutable means "set in stone"—once configured, it stays that way. Fluent interface lets you chain method calls like sentences. Merging combines settings from different sources, and defaults prevent errors when something's missing.</p>
        </section>

        <section id="think-of-it" class="section content-card">
            <h2>Think Of It</h2>
            <p>Imagine configuring a complex kitchen appliance before cooking. ContainerConfig is the control panel where you set all the preferences:</p>
            <ul>
                <li>Constructor is like plugging in the appliance with initial settings</li>
                <li>withSettings() is like adjusting multiple dials at once</li>
                <li>get() is like checking what temperature you set</li>
                <li>has() is like verifying if you configured a particular feature</li>
                <li>Immutability is like the settings being locked once cooking starts</li>
            </ul>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Kitchen Appliance</th>
                            <th>ContainerConfig</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Control panel with preset programs</td>
                            <td>Immutable configuration with fluent API</td>
                        </tr>
                            <td>Adjusting temperature and time</td>
                            <td>Setting multiple configuration values</td>
                        </tr>
                        <tr>
                            <td>Checking current settings</td>
                            <td>Accessing configuration with get()</td>
                        </tr>
                        <tr>
                            <td>Verifying program selection</td>
                            <td>Checking existence with has()</td>
                        </tr>
                        <tr>
                            <td>Settings locked during operation</td>
                            <td>Immutability preventing runtime changes</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <h3>For Humans: What This Means</h3>
            <p>This class turns configuration into a safe, predictable process. Like a well-designed appliance, you set everything up front, and then it works reliably without surprises. No more wondering if someone changed the settings mid-operation.</p>
        </section>

        <section id="story-example" class="section content-card">
            <h2>Story Example</h2>
            <p>You're deploying an application across multiple environments—development, staging, and production. Each environment needs different database connections, cache settings, and logging levels. You want to ensure that once the application starts, these settings can't be accidentally modified.</p>
            <h3>The Problem</h3>
            <p>Mutable configuration objects can be modified at runtime, leading to unpredictable behavior and hard-to-debug issues.</p>
            <h3>The Solution</h3>
            <p>ContainerConfig provides immutable configuration that can be composed from multiple sources but remains unchanged once created, ensuring consistent behavior throughout the application lifecycle.</p>
            <h3>For Humans: What This Means</h3>
            <p>This solves the problem of "how do I make sure my app's settings don't change unexpectedly?" It's like having a configuration that gets sealed once the application starts, preventing any accidental or malicious modifications.</p>
        </section>

        <section id="for-dummies" class="section content-card">
            <h2>For Dummies</h2>
            <p>ContainerConfig is like a settings page that you fill out before starting your app, and then it gets locked so nobody can change it.</p>
            <h3>Simple Usage</h3>
            <pre><code class="language-php">$config = new ContainerConfig(['debug' => true]);
$newConfig = $config->withSettings(['database' => 'prod']);

$debug = $newConfig->get('debug'); // true
$db = $newConfig->get('database'); // 'prod'
$missing = $newConfig->get('timeout', 30); // 30 (default)
</code></pre>
            <h3>Why Immutable?</h3>
            <p>If settings could change while your app runs, it would be like someone turning up the oven temperature halfway through baking. Things would burn! Immutability prevents that.</p>
            <h3>For Humans: What This Means</h3>
            <p>This class makes configuration safe. You set it up once, and then you can trust that it stays the same. It's the foundation that lets your container behave predictably.</p>
        </section>

        <section id="how-it-works" class="section content-card">
            <h2>How It Works</h2>
            <p>The class uses PHP's readonly properties and array operations:</p>
            <ol>
                <li><strong>Construction:</strong> Settings array stored in readonly property</li>
                <li><strong>Composition:</strong> withSettings() creates new instance with merged arrays</li>
                <li><strong>Access:</strong> get() performs array key lookup with default fallback</li>
                <li><strong>Existence Check:</strong> has() uses array_key_exists for verification</li>
                <li><strong>Immutability:</strong> All operations return new instances, never modify existing ones</li>
            </ol>
            <h3>For Humans: What This Means</h3>
            <p>It's just smart array management with safety guards. Every time you "change" something, you actually get a new configuration object. The old one stays exactly as it was, so nothing can accidentally break existing code that depends on it.</p>
        </section>

        <section id="architecture-role" class="section content-card">
            <h2>Architecture Role</h2>
            <p>This class serves as the configuration foundation in the composition root, providing type-safe, immutable configuration management that prevents runtime configuration drift.</p>
            <h3>What Depends on This</h3>
            <ul>
                <li>Container kernel initialization</li>
                <li>Feature module configuration</li>
                <li>Bootstrap and application startup</li>
                <li>Environment-specific setup</li>
            </ul>
            <h3>What This Depends On</h3>
            <ul>
                <li>PHP readonly properties</li>
                <li>Array functions for merging and access</li>
            </ul>
            <h3>For Humans: What This Means</h3>
            <p>This is the trusted source of truth for container settings. Everything that needs to know "how should the container behave?" asks this class. It's deliberately simple and reliable, forming the bedrock of the configuration system.</p>
        </section>

        <section id="risks-trade-offs" class="section content-card">
            <h2>Risks, Trade-offs & Recommended Practices</h2>
            <h3>Memory Usage</h3>
            <p><strong>Risk:</strong> Creating new instances for each configuration change uses more memory.</p>
            <p><strong>Design Stance:</strong> Prioritizes correctness and safety over memory efficiency.</p>
            <p><strong>Recommended Practice:</strong> Perform configuration composition during bootstrap, not at runtime.</p>
            <h3>For Humans: What This Means</h3>
            <p>You might create a few extra objects during setup, but once the app is running, the configuration is stable and efficient. The trade-off is worth it to prevent bugs from configuration changes.</p>
            <h3>Configuration Complexity</h3>
            <p><strong>Risk:</strong> Deep configuration hierarchies become cumbersome to access.</p>
            <p><strong>Design Stance:</strong> Simple key-value with dot notation support where needed.</p>
            <p><strong>Recommended Practice:</strong> Keep configuration reasonably flat, use meaningful key names.</p>
            <h3>For Humans: What This Means</h3>
            <p>Don't make your configuration a deep nested mess. Keep it simple and clear, and you'll have fewer problems accessing the values you need.</p>
        </section>

        <section id="related-files-folders" class="section content-card">
            <h2>Related Files & Folders</h2>
            <ul>
                <li><strong>Core/index.html:</strong> Overview of core components</li>
                <li><strong>Config/Settings.php:</strong> Lower-level configuration storage</li>
                <li><strong>Operate/Config/:</strong> Bootstrap configuration handling</li>
                <li><strong>ContainerKernel.php:</strong> Uses configuration during initialization</li>
            </ul>
            <h3>For Humans: What This Means</h3>
            <p>This class sits in the middle of the configuration hierarchy. It's more structured than basic Settings but simpler than full bootstrap configuration. It connects the low-level storage with high-level application setup.</p>
        </section>
    </main>
</div>
</body>
</html>