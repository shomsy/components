<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>ContainerBuilder - Foundation Container</title>
    <link href="../../styles.css" rel="stylesheet">
</head>

<body>
    <div class="layout">
                                <aside class="sidebar">
        <div class="brand"><a href="../../index.html">Container Docs</a></div>
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search...">
        </div>
        <nav>
            <div class="nav-section">
                <h3 class="nav-title">Container (Root)</h3>
                <ul class="nav-list">
                    <li><a href="../Container.html">Container</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Act/Inject</h3>
                <ul class="nav-list">
                    <li><a href="../Act/Inject/InjectDependencies.html">InjectDependencies</a></li>
                    <li><a href="../Act/Inject/PropertyInjector.html">PropertyInjector</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Advanced/Lazy</h3>
                <ul class="nav-list">
                    <li><a href="../Actions/Advanced/Lazy/LazyInterface.html">LazyInterface</a></li>
                    <li><a href="../Actions/Advanced/Lazy/LazyValue.html">LazyValue</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Inject</h3>
                <ul class="nav-list">
                    <li><a href="../Actions/Inject/InjectDependencies.html">InjectDependencies</a></li>
                    <li><a href="../Actions/Inject/PropertyInjector.html">PropertyInjector</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Inject/Resolvers</h3>
                <ul class="nav-list">
                    <li><a href="../Actions/Inject/Resolvers/PropertyResolution.html">PropertyResolution</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Instantiate</h3>
                <ul class="nav-list">
                    <li><a href="../Actions/Instantiate/Instantiator.html">Instantiator</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Invoke/Cache</h3>
                <ul class="nav-list">
                    <li><a href="../Actions/Invoke/Cache/ReflectionCache.html">ReflectionCache</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Advanced/Lazy</h3>
                <ul class="nav-list">
                    <li><a href="../Advanced/Lazy/LazyInterface.html">LazyInterface</a></li>
                    <li><a href="../Advanced/Lazy/LazyValue.html">LazyValue</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Advanced/Observe</h3>
                <ul class="nav-list">
                    <li><a href="../Advanced/Observe/DiagnosticsFlow.html">DiagnosticsFlow</a></li>
                    <li><a href="../Advanced/Observe/Telemetry.html">Telemetry</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Advanced/Policy</h3>
                <ul class="nav-list">
                    <li><a href="../Advanced/Policy/PolicyFlow.html">PolicyFlow</a></li>
                    <li><a href="../Advanced/Policy/Security.html">Security</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core</h3>
                <ul class="nav-list">
                    <li><a href="Container.html">Container</a></li>
                    <li><a href="ContainerBuilder.html">ContainerBuilder</a></li>
                    <li><a href="ContainerConfig.html">ContainerConfig</a></li>
                    <li><a href="ContainerEngine.html">ContainerEngine</a></li>
                    <li><a href="ContainerKernel.html">ContainerKernel</a></li>
                    <li><a href="ResolutionEngine.html">ResolutionEngine</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Attribute</h3>
                <ul class="nav-list">
                    <li><a href="Attribute/Inject.html">Inject</a></li>
                    <li><a href="Attribute/Singleton.html">Singleton</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/DTO</h3>
                <ul class="nav-list">
                    <li><a href="DTO/ErrorDTO.html">ErrorDTO</a></li>
                    <li><a href="DTO/InjectionReport.html">InjectionReport</a></li>
                    <li><a href="DTO/SuccessDTO.html">SuccessDTO</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Enum</h3>
                <ul class="nav-list">
                    <li><a href="Enum/ServiceLifetime.html">ServiceLifetime</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Exceptions</h3>
                <ul class="nav-list">
                    <li><a href="Exceptions/ContainerExceptions.html">ContainerExceptions</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel</h3>
                <ul class="nav-list">
                    <li><a href="Kernel/KernelCompiler.html">KernelCompiler</a></li>
                    <li><a href="Kernel/KernelConfig.html">KernelConfig</a></li>
                    <li><a href="Kernel/KernelFacade.html">KernelFacade</a></li>
                    <li><a href="Kernel/KernelRuntime.html">KernelRuntime</a></li>
                    <li><a href="Kernel/KernelState.html">KernelState</a></li>
                    <li><a href="Kernel/LifecycleResolver.html">LifecycleResolver</a></li>
                    <li><a href="Kernel/LifecycleStrategyRegistry.html">LifecycleStrategyRegistry</a></li>
                    <li><a href="Kernel/ResolutionPipeline.html">ResolutionPipeline</a></li>
                    <li><a href="Kernel/ResolutionPipelineBuilder.html">ResolutionPipelineBuilder</a></li>
                    <li><a href="Kernel/StepTelemetryCollector.html">StepTelemetryCollector</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel/Contracts</h3>
                <ul class="nav-list">
                    <li><a href="Kernel/Contracts/KernelContext.html">KernelContext</a></li>
                    <li><a href="Kernel/Contracts/KernelStep.html">KernelStep</a></li>
                    <li><a href="Kernel/Contracts/LifecycleStrategy.html">LifecycleStrategy</a></li>
                    <li><a href="Kernel/Contracts/StepTelemetry.html">StepTelemetry</a></li>
                    <li><a href="Kernel/Contracts/TerminalKernelStep.html">TerminalKernelStep</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel/Events</h3>
                <ul class="nav-list">
                    <li><a href="Kernel/Events/StepFailed.html">StepFailed</a></li>
                    <li><a href="Kernel/Events/StepStarted.html">StepStarted</a></li>
                    <li><a href="Kernel/Events/StepSucceeded.html">StepSucceeded</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel/Steps</h3>
                <ul class="nav-list">
                    <li><a href="Kernel/Steps/AnalyzePrototypeStep.html">AnalyzePrototypeStep</a></li>
                    <li><a href="Kernel/Steps/ApplyExtendersStep.html">ApplyExtendersStep</a></li>
                    <li><a href="Kernel/Steps/CircularDependencyStep.html">CircularDependencyStep</a></li>
                    <li><a href="Kernel/Steps/CollectDiagnosticsStep.html">CollectDiagnosticsStep</a></li>
                    <li><a href="Kernel/Steps/DepthGuardStep.html">DepthGuardStep</a></li>
                    <li><a href="Kernel/Steps/EnsureDefinitionExistsStep.html">EnsureDefinitionExistsStep</a></li>
                    <li><a href="Kernel/Steps/GuardPolicyStep.html">GuardPolicyStep</a></li>
                    <li><a href="Kernel/Steps/InjectDependenciesStep.html">InjectDependenciesStep</a></li>
                    <li><a href="Kernel/Steps/InvokePostConstructStep.html">InvokePostConstructStep</a></li>
                    <li><a href="Kernel/Steps/ResolveInstanceStep.html">ResolveInstanceStep</a></li>
                    <li><a href="Kernel/Steps/RetrieveFromScopeStep.html">RetrieveFromScopeStep</a></li>
                    <li><a href="Kernel/Steps/StoreLifecycleStep.html">StoreLifecycleStep</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel/Strategies</h3>
                <ul class="nav-list">
                    <li><a href="Kernel/Strategies/ScopedLifecycleStrategy.html">ScopedLifecycleStrategy</a></li>
                    <li><a href="Kernel/Strategies/SingletonLifecycleStrategy.html">SingletonLifecycleStrategy</a></li>
                    <li><a href="Kernel/Strategies/TransientLifecycleStrategy.html">TransientLifecycleStrategy</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Utils</h3>
                <ul class="nav-list">
                    <li><a href="Utils/ArrayTools.html">ArrayTools</a></li>
                    <li><a href="Utils/StrTools.html">StrTools</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Define/Bind</h3>
                <ul class="nav-list">
                    <li><a href="../Define/Bind/BindingBuilder.html">BindingBuilder</a></li>
                    <li><a href="../Define/Bind/ContextBuilder.html">ContextBuilder</a></li>
                    <li><a href="../Define/Bind/Registrar.html">Registrar</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Define/Store</h3>
                <ul class="nav-list">
                    <li><a href="../Define/Store/DefinitionStore.html">DefinitionStore</a></li>
                    <li><a href="../Define/Store/ServiceDefinition.html">ServiceDefinition</a></li>
                    <li><a href="../Define/Store/ServiceDefinitionEntity.html">ServiceDefinitionEntity</a></li>
                    <li><a href="../Define/Store/ServiceDiscovery.html">ServiceDiscovery</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Define/Store/Compiler</h3>
                <ul class="nav-list">
                    <li><a href="../Define/Store/Compiler/CompilerPassInterface.html">CompilerPassInterface</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Invoke</h3>
                <ul class="nav-list">
                    <li><a href="../Invoke/InvocationExecutor.html">InvocationExecutor</a></li>
                    <li><a href="../Invoke/InvokeAction.html">InvokeAction</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Invoke/Cache</h3>
                <ul class="nav-list">
                    <li><a href="../Invoke/Cache/ReflectionCache.html">ReflectionCache</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Invoke/Context</h3>
                <ul class="nav-list">
                    <li><a href="../Invoke/Context/InvocationContext.html">InvocationContext</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate</h3>
                <ul class="nav-list">
                    <li><a href="../Operate/ScopeManager.html">ScopeManager</a></li>
                    <li><a href="../Operate/ScopeRegistry.html">ScopeRegistry</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate/Boot</h3>
                <ul class="nav-list">
                    <li><a href="../Operate/Boot/Application.html">Application</a></li>
                    <li><a href="../Operate/Boot/ApplicationBuilder.html">ApplicationBuilder</a></li>
                    <li><a href="../Operate/Boot/ContainerBootstrapper.html">ContainerBootstrapper</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate/Config</h3>
                <ul class="nav-list">
                    <li><a href="../Operate/Config/BootstrapProfile.html">BootstrapProfile</a></li>
                    <li><a href="../Operate/Config/ContainerConfig.html">ContainerConfig</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate/Scope</h3>
                <ul class="nav-list">
                    <li><a href="../Operate/Scope/ScopeManager.html">ScopeManager</a></li>
                    <li><a href="../Operate/Scope/ScopeRegistry.html">ScopeRegistry</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate/Shutdown</h3>
                <ul class="nav-list">
                    <li><a href="../Operate/Shutdown/TerminateContainer.html">TerminateContainer</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Resolve</h3>
                <ul class="nav-list">
                    <li><a href="../Resolve/DependencyResolver.html">DependencyResolver</a></li>
                    <li><a href="../Resolve/ResolutionContext.html">ResolutionContext</a></li>
                    <li><a href="../Resolve/ResolutionEngine.html">ResolutionEngine</a></li>
                    <li><a href="../Resolve/ResolutionPipeline.html">ResolutionPipeline</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Resolve/Pipes</h3>
                <ul class="nav-list">
                    <li><a href="../Resolve/Pipes/AutowirePipe.html">AutowirePipe</a></li>
                    <li><a href="../Resolve/Pipes/BindingPipe.html">BindingPipe</a></li>
                    <li><a href="../Resolve/Pipes/ScopePipe.html">ScopePipe</a></li>
                    <li><a href="../Resolve/Pipes/TerminalPipe.html">TerminalPipe</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Resolve/Resolvers</h3>
                <ul class="nav-list">
                    <li><a href="../Resolve/Resolvers/DefaultResolver.html">DefaultResolver</a></li>
                    <li><a href="../Resolve/Resolvers/ExceptionResolver.html">ExceptionResolver</a></li>
                    <li><a href="../Resolve/Resolvers/NullResolver.html">NullResolver</a></li>
                    <li><a href="../Resolve/Resolvers/OverrideResolver.html">OverrideResolver</a></li>
                    <li><a href="../Resolve/Resolvers/ParameterResolutionChain.html">ParameterResolutionChain</a></li>
                    <li><a href="../Resolve/Resolvers/ParameterResolver.html">ParameterResolver</a></li>
                    <li><a href="../Resolve/Resolvers/TypeResolver.html">TypeResolver</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Analyze</h3>
                <ul class="nav-list">
                    <li><a href="../Think/Analyze/PrototypeAnalyzer.html">PrototypeAnalyzer</a></li>
                    <li><a href="../Think/Analyze/ReflectionTypeAnalyzer.html">ReflectionTypeAnalyzer</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Cache</h3>
                <ul class="nav-list">
                    <li><a href="../Think/Cache/FilePrototypeCache.html">FilePrototypeCache</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Model</h3>
                <ul class="nav-list">
                    <li><a href="../Think/Model/MethodPrototype.html">MethodPrototype</a></li>
                    <li><a href="../Think/Model/ParameterPrototype.html">ParameterPrototype</a></li>
                    <li><a href="../Think/Model/PropertyPrototype.html">PropertyPrototype</a></li>
                    <li><a href="../Think/Model/ServicePrototype.html">ServicePrototype</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Prototype</h3>
                <ul class="nav-list">
                    <li><a href="../Think/Prototype/ServicePrototypeFactory.html">ServicePrototypeFactory</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Prototype/Contracts</h3>
                <ul class="nav-list">
                    <li><a href="../Think/Prototype/Contracts/ServicePrototypeFactoryInterface.html">ServicePrototypeFactoryInterface</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Verify</h3>
                <ul class="nav-list">
                    <li><a href="../Think/Verify/VerifyPrototype.html">VerifyPrototype</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Guidelines</h3>
                <ul class="nav-list">
                    <li><a href="../../master-prompt.html">Master Prompt</a></li>
                </ul>
            </div>
        </nav>
    </aside>
        <main class="content">
            <section class="hero">
                <h1>ContainerBuilder</h1>
                <p class="lead">Fluent API for constructing and configuring the dependency injection container.</p>
                <div class="meta">Foundation/Container/Features/Core/ContainerBuilder.php</div>
            </section>

            <section class="section">
                <h2>Quick Summary</h2>
                <div class="card">
                    <p><strong>ContainerBuilder</strong> is the entry point for creating a new container instance. It
                        provides a fluent, chainable API for configuring the container before it's built and ready to
                        use.</p>
                </div>
            </section>

            <section class="section">
                <h2>Story Example: Building Your First Container</h2>
                <div class="card">
                    <h3>Scenario: Setting Up a Web Application</h3>
                    <p>You're starting a new web application and need to configure dependency injection:</p>

                    <pre><code class="language-php">use Avax\Container\Core\ContainerBuilder;
use Avax\Container\Features\Operate\Config\ContainerConfig;

// Step 1: Create builder
$builder = ContainerBuilder::create();

// Step 2: Configure (optional)
$builder->withConfig(
    ContainerConfig::production()
);

// Step 3: Register services
$builder->bind(LoggerInterface::class, FileLogger::class);
$builder->bind(CacheInterface::class, RedisCache::class);

// Step 4: Build the container
$container = $builder->build();

// Step 5: Use it!
$logger = $container->get(LoggerInterface::class);
$logger->info('Application started');</code></pre>

                    <details class="more">
                        <summary>What Happens Behind the Scenes</summary>
                        <ol>
                            <li><strong>Initialization:</strong> Builder creates empty <a
                                    href="../Define/Store/DefinitionStore.html">DefinitionStore</a> and <a
                                    href="../Operate/Scope/ScopeRegistry.html">ScopeRegistry</a>.</li>
                            <li><strong>Configuration:</strong> Applies <a
                                    href="../Operate/Config/ContainerConfig.html">ContainerConfig</a> settings (caching,
                                debug mode, etc.).</li>
                            <li><strong>Service Registration:</strong> Each <code>bind()</code> creates a <a
                                    href="../Define/Store/ServiceDefinition.html">ServiceDefinition</a>.</li>
                            <li><strong>Bootstrapping:</strong> <a
                                    href="../Operate/Boot/ContainerBootstrapper.html">ContainerBootstrapper</a> wires
                                all internal components.</li>
                            <li><strong>Container Creation:</strong> Returns fully configured <a
                                    href="../../Container.html">Container</a> instance.</li>
                        </ol>
                    </details>
                </div>
            </section>

            <section class="section">
                <h2>How It Works</h2>
                <div class="card">
                    <h3>Builder Pattern Implementation</h3>
                    <p>ContainerBuilder implements the <strong>Builder Pattern</strong>, separating the construction of
                        a complex object (Container) from its representation.</p>

                    <h4>Key Methods</h4>
                    <ul>
                        <li><code>create()</code> - Static factory method to start building</li>
                        <li><code>withConfig(ContainerConfig $config)</code> - Set container configuration</li>
                        <li><code>bind(string $abstract, mixed $concrete)</code> - Register a service binding</li>
                        <li><code>singleton(string $abstract, mixed $concrete)</code> - Register as singleton</li>
                        <li><code>build()</code> - Construct and return the Container</li>
                    </ul>

                    <details class="more">
                        <summary>Fluent API Design</summary>
                        <p>The builder uses <strong>method chaining</strong> to provide a readable, expressive API:</p>
                        <pre><code class="language-php">$container = ContainerBuilder::create()
    ->withConfig(ContainerConfig::development())
    ->bind(UserRepository::class, SqlUserRepository::class)
    ->bind(Logger::class, fn() => new FileLogger('/var/log/app.log'))
    ->singleton(CacheInterface::class, RedisCache::class)
    ->build();</code></pre>
                        <p>Each method returns <code>$this</code>, enabling the chain.</p>
                    </details>
                </div>
            </section>

            <section class="section">
                <h2>Architecture</h2>
                <div class="card">
                    <h3>Role in the Container Ecosystem</h3>
                    <p>ContainerBuilder sits at the <strong>entry point</strong> of the container lifecycle:</p>

                    <div class="architecture-flow">
                        <div class="flow-step">
                            <strong>1. ContainerBuilder</strong>
                            <p>Configuration & Registration</p>
                        </div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-step">
                            <strong>2. <a
                                    href="../Operate/Boot/ContainerBootstrapper.html">ContainerBootstrapper</a></strong>
                            <p>Wiring Internal Components</p>
                        </div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-step">
                            <strong>3. <a href="../../Container.html">Container</a></strong>
                            <p>Ready for Service Resolution</p>
                        </div>
                    </div>

                    <details class="more">
                        <summary>Component Dependencies</summary>
                        <p>ContainerBuilder orchestrates these components:</p>
                        <ul>
                            <li><a href="../Define/Store/DefinitionStore.html">DefinitionStore</a> - Stores service
                                definitions</li>
                            <li><a href="../Operate/Scope/ScopeRegistry.html">ScopeRegistry</a> - Manages instance
                                scopes</li>
                            <li><a href="../Operate/Config/ContainerConfig.html">ContainerConfig</a> - Runtime
                                configuration</li>
                            <li><a href="../Think/Prototype/ServicePrototypeFactory.html">ServicePrototypeFactory</a> -
                                Prototype analysis</li>
                            <li><a href="../Actions/Resolve/Engine.html">ResolutionEngine</a> - Service resolution</li>
                        </ul>
                    </details>
                </div>
            </section>

            <section class="section">
                <h2>Related Components</h2>
                <div class="card">
                    <h3>Explore Related Documentation</h3>
                    <ul class="related-links">
                        <li>
                            <a href="../../Container.html"><strong>Container</strong></a>
                            <p>The final product - use this to resolve services</p>
                        </li>
                        <li>
                            <a href="../Operate/Config/ContainerConfig.html"><strong>ContainerConfig</strong></a>
                            <p>Configure caching, debug mode, and performance settings</p>
                        </li>
                        <li>
                            <a href="../Define/Bind/BindingBuilder.html"><strong>BindingBuilder</strong></a>
                            <p>Fluent API for defining service bindings</p>
                        </li>
                        <li>
                            <a href="../Operate/Boot/Application.html"><strong>Application</strong></a>
                            <p>Higher-level abstraction for web applications</p>
                        </li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>Best Practices</h2>
                <div class="card">
                    <h3>Tips for Using ContainerBuilder</h3>
                    <details class="more">
                        <summary>Configuration Strategies</summary>
                        <ul>
                            <li><strong>Environment-Specific:</strong> Use <code>ContainerConfig::development()</code>
                                or <code>production()</code></li>
                            <li><strong>Service Providers:</strong> Group related bindings in Service Provider classes
                            </li>
                            <li><strong>Lazy Loading:</strong> Use closures for expensive service creation</li>
                            <li><strong>Interface Binding:</strong> Always bind to interfaces, not concrete classes</li>
                        </ul>
                        <pre><code class="language-php">// ✓ Good - Bind to interface
$builder->bind(LoggerInterface::class, FileLogger::class);

// ✗ Bad - Bind to concrete class
$builder->bind(FileLogger::class, FileLogger::class);</code></pre>
                    </details>
                </div>
            </section>
        </main>
    </div>
</body>

</html>