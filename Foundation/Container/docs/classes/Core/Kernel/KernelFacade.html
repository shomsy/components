<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>KernelFacade</title>
    <link href="../../../styles.css" rel="stylesheet">
</head>
<body>
<div class="layout">
                        <aside class="sidebar">
        <div class="brand"><a href="../../../index.html">Container Docs</a></div>
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search...">
        </div>
        <nav>
            <div class="nav-section">
                <h3 class="nav-title">Container (Root)</h3>
                <ul class="nav-list">
                    <li><a href="../../Container.html">Container</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Act/Inject</h3>
                <ul class="nav-list">
                    <li><a href="../../Act/Inject/InjectDependencies.html">InjectDependencies</a></li>
                    <li><a href="../../Act/Inject/PropertyInjector.html">PropertyInjector</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Advanced/Lazy</h3>
                <ul class="nav-list">
                    <li><a href="../../Actions/Advanced/Lazy/LazyInterface.html">LazyInterface</a></li>
                    <li><a href="../../Actions/Advanced/Lazy/LazyValue.html">LazyValue</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Inject</h3>
                <ul class="nav-list">
                    <li><a href="../../Actions/Inject/InjectDependencies.html">InjectDependencies</a></li>
                    <li><a href="../../Actions/Inject/PropertyInjector.html">PropertyInjector</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Inject/Resolvers</h3>
                <ul class="nav-list">
                    <li><a href="../../Actions/Inject/Resolvers/PropertyResolution.html">PropertyResolution</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Instantiate</h3>
                <ul class="nav-list">
                    <li><a href="../../Actions/Instantiate/Instantiator.html">Instantiator</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Actions/Invoke/Cache</h3>
                <ul class="nav-list">
                    <li><a href="../../Actions/Invoke/Cache/ReflectionCache.html">ReflectionCache</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Advanced/Lazy</h3>
                <ul class="nav-list">
                    <li><a href="../../Advanced/Lazy/LazyInterface.html">LazyInterface</a></li>
                    <li><a href="../../Advanced/Lazy/LazyValue.html">LazyValue</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Advanced/Observe</h3>
                <ul class="nav-list">
                    <li><a href="../../Advanced/Observe/DiagnosticsFlow.html">DiagnosticsFlow</a></li>
                    <li><a href="../../Advanced/Observe/Telemetry.html">Telemetry</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Advanced/Policy</h3>
                <ul class="nav-list">
                    <li><a href="../../Advanced/Policy/PolicyFlow.html">PolicyFlow</a></li>
                    <li><a href="../../Advanced/Policy/Security.html">Security</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core</h3>
                <ul class="nav-list">
                    <li><a href="../Container.html">Container</a></li>
                    <li><a href="../ContainerBuilder.html">ContainerBuilder</a></li>
                    <li><a href="../ContainerConfig.html">ContainerConfig</a></li>
                    <li><a href="../ContainerEngine.html">ContainerEngine</a></li>
                    <li><a href="../ContainerKernel.html">ContainerKernel</a></li>
                    <li><a href="../ResolutionEngine.html">ResolutionEngine</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Attribute</h3>
                <ul class="nav-list">
                    <li><a href="../Attribute/Inject.html">Inject</a></li>
                    <li><a href="../Attribute/Singleton.html">Singleton</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/DTO</h3>
                <ul class="nav-list">
                    <li><a href="../DTO/ErrorDTO.html">ErrorDTO</a></li>
                    <li><a href="../DTO/InjectionReport.html">InjectionReport</a></li>
                    <li><a href="../DTO/SuccessDTO.html">SuccessDTO</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Enum</h3>
                <ul class="nav-list">
                    <li><a href="../Enum/ServiceLifetime.html">ServiceLifetime</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Exceptions</h3>
                <ul class="nav-list">
                    <li><a href="../Exceptions/ContainerExceptions.html">ContainerExceptions</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel</h3>
                <ul class="nav-list">
                    <li><a href="KernelCompiler.html">KernelCompiler</a></li>
                    <li><a href="KernelConfig.html">KernelConfig</a></li>
                    <li><a href="KernelFacade.html">KernelFacade</a></li>
                    <li><a href="KernelRuntime.html">KernelRuntime</a></li>
                    <li><a href="KernelState.html">KernelState</a></li>
                    <li><a href="LifecycleResolver.html">LifecycleResolver</a></li>
                    <li><a href="LifecycleStrategyRegistry.html">LifecycleStrategyRegistry</a></li>
                    <li><a href="ResolutionPipeline.html">ResolutionPipeline</a></li>
                    <li><a href="ResolutionPipelineBuilder.html">ResolutionPipelineBuilder</a></li>
                    <li><a href="StepTelemetryCollector.html">StepTelemetryCollector</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel/Contracts</h3>
                <ul class="nav-list">
                    <li><a href="Contracts/KernelContext.html">KernelContext</a></li>
                    <li><a href="Contracts/KernelStep.html">KernelStep</a></li>
                    <li><a href="Contracts/LifecycleStrategy.html">LifecycleStrategy</a></li>
                    <li><a href="Contracts/StepTelemetry.html">StepTelemetry</a></li>
                    <li><a href="Contracts/TerminalKernelStep.html">TerminalKernelStep</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel/Events</h3>
                <ul class="nav-list">
                    <li><a href="Events/StepFailed.html">StepFailed</a></li>
                    <li><a href="Events/StepStarted.html">StepStarted</a></li>
                    <li><a href="Events/StepSucceeded.html">StepSucceeded</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel/Steps</h3>
                <ul class="nav-list">
                    <li><a href="Steps/AnalyzePrototypeStep.html">AnalyzePrototypeStep</a></li>
                    <li><a href="Steps/ApplyExtendersStep.html">ApplyExtendersStep</a></li>
                    <li><a href="Steps/CircularDependencyStep.html">CircularDependencyStep</a></li>
                    <li><a href="Steps/CollectDiagnosticsStep.html">CollectDiagnosticsStep</a></li>
                    <li><a href="Steps/DepthGuardStep.html">DepthGuardStep</a></li>
                    <li><a href="Steps/EnsureDefinitionExistsStep.html">EnsureDefinitionExistsStep</a></li>
                    <li><a href="Steps/GuardPolicyStep.html">GuardPolicyStep</a></li>
                    <li><a href="Steps/InjectDependenciesStep.html">InjectDependenciesStep</a></li>
                    <li><a href="Steps/InvokePostConstructStep.html">InvokePostConstructStep</a></li>
                    <li><a href="Steps/ResolveInstanceStep.html">ResolveInstanceStep</a></li>
                    <li><a href="Steps/RetrieveFromScopeStep.html">RetrieveFromScopeStep</a></li>
                    <li><a href="Steps/StoreLifecycleStep.html">StoreLifecycleStep</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Kernel/Strategies</h3>
                <ul class="nav-list">
                    <li><a href="Strategies/ScopedLifecycleStrategy.html">ScopedLifecycleStrategy</a></li>
                    <li><a href="Strategies/SingletonLifecycleStrategy.html">SingletonLifecycleStrategy</a></li>
                    <li><a href="Strategies/TransientLifecycleStrategy.html">TransientLifecycleStrategy</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Core/Utils</h3>
                <ul class="nav-list">
                    <li><a href="../Utils/ArrayTools.html">ArrayTools</a></li>
                    <li><a href="../Utils/StrTools.html">StrTools</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Define/Bind</h3>
                <ul class="nav-list">
                    <li><a href="../../Define/Bind/BindingBuilder.html">BindingBuilder</a></li>
                    <li><a href="../../Define/Bind/ContextBuilder.html">ContextBuilder</a></li>
                    <li><a href="../../Define/Bind/Registrar.html">Registrar</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Define/Store</h3>
                <ul class="nav-list">
                    <li><a href="../../Define/Store/DefinitionStore.html">DefinitionStore</a></li>
                    <li><a href="../../Define/Store/ServiceDefinition.html">ServiceDefinition</a></li>
                    <li><a href="../../Define/Store/ServiceDefinitionEntity.html">ServiceDefinitionEntity</a></li>
                    <li><a href="../../Define/Store/ServiceDiscovery.html">ServiceDiscovery</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Define/Store/Compiler</h3>
                <ul class="nav-list">
                    <li><a href="../../Define/Store/Compiler/CompilerPassInterface.html">CompilerPassInterface</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Invoke</h3>
                <ul class="nav-list">
                    <li><a href="../../Invoke/InvocationExecutor.html">InvocationExecutor</a></li>
                    <li><a href="../../Invoke/InvokeAction.html">InvokeAction</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Invoke/Cache</h3>
                <ul class="nav-list">
                    <li><a href="../../Invoke/Cache/ReflectionCache.html">ReflectionCache</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Invoke/Context</h3>
                <ul class="nav-list">
                    <li><a href="../../Invoke/Context/InvocationContext.html">InvocationContext</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate</h3>
                <ul class="nav-list">
                    <li><a href="../../Operate/ScopeManager.html">ScopeManager</a></li>
                    <li><a href="../../Operate/ScopeRegistry.html">ScopeRegistry</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate/Boot</h3>
                <ul class="nav-list">
                    <li><a href="../../Operate/Boot/Application.html">Application</a></li>
                    <li><a href="../../Operate/Boot/ApplicationBuilder.html">ApplicationBuilder</a></li>
                    <li><a href="../../Operate/Boot/ContainerBootstrapper.html">ContainerBootstrapper</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate/Config</h3>
                <ul class="nav-list">
                    <li><a href="../../Operate/Config/BootstrapProfile.html">BootstrapProfile</a></li>
                    <li><a href="../../Operate/Config/ContainerConfig.html">ContainerConfig</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate/Scope</h3>
                <ul class="nav-list">
                    <li><a href="../../Operate/Scope/ScopeManager.html">ScopeManager</a></li>
                    <li><a href="../../Operate/Scope/ScopeRegistry.html">ScopeRegistry</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Operate/Shutdown</h3>
                <ul class="nav-list">
                    <li><a href="../../Operate/Shutdown/TerminateContainer.html">TerminateContainer</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Resolve</h3>
                <ul class="nav-list">
                    <li><a href="../../Resolve/DependencyResolver.html">DependencyResolver</a></li>
                    <li><a href="../../Resolve/ResolutionContext.html">ResolutionContext</a></li>
                    <li><a href="../../Resolve/ResolutionEngine.html">ResolutionEngine</a></li>
                    <li><a href="../../Resolve/ResolutionPipeline.html">ResolutionPipeline</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Resolve/Pipes</h3>
                <ul class="nav-list">
                    <li><a href="../../Resolve/Pipes/AutowirePipe.html">AutowirePipe</a></li>
                    <li><a href="../../Resolve/Pipes/BindingPipe.html">BindingPipe</a></li>
                    <li><a href="../../Resolve/Pipes/ScopePipe.html">ScopePipe</a></li>
                    <li><a href="../../Resolve/Pipes/TerminalPipe.html">TerminalPipe</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Resolve/Resolvers</h3>
                <ul class="nav-list">
                    <li><a href="../../Resolve/Resolvers/DefaultResolver.html">DefaultResolver</a></li>
                    <li><a href="../../Resolve/Resolvers/ExceptionResolver.html">ExceptionResolver</a></li>
                    <li><a href="../../Resolve/Resolvers/NullResolver.html">NullResolver</a></li>
                    <li><a href="../../Resolve/Resolvers/OverrideResolver.html">OverrideResolver</a></li>
                    <li><a href="../../Resolve/Resolvers/ParameterResolutionChain.html">ParameterResolutionChain</a></li>
                    <li><a href="../../Resolve/Resolvers/ParameterResolver.html">ParameterResolver</a></li>
                    <li><a href="../../Resolve/Resolvers/TypeResolver.html">TypeResolver</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Analyze</h3>
                <ul class="nav-list">
                    <li><a href="../../Think/Analyze/PrototypeAnalyzer.html">PrototypeAnalyzer</a></li>
                    <li><a href="../../Think/Analyze/ReflectionTypeAnalyzer.html">ReflectionTypeAnalyzer</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Cache</h3>
                <ul class="nav-list">
                    <li><a href="../../Think/Cache/FilePrototypeCache.html">FilePrototypeCache</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Model</h3>
                <ul class="nav-list">
                    <li><a href="../../Think/Model/MethodPrototype.html">MethodPrototype</a></li>
                    <li><a href="../../Think/Model/ParameterPrototype.html">ParameterPrototype</a></li>
                    <li><a href="../../Think/Model/PropertyPrototype.html">PropertyPrototype</a></li>
                    <li><a href="../../Think/Model/ServicePrototype.html">ServicePrototype</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Prototype</h3>
                <ul class="nav-list">
                    <li><a href="../../Think/Prototype/ServicePrototypeFactory.html">ServicePrototypeFactory</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Prototype/Contracts</h3>
                <ul class="nav-list">
                    <li><a href="../../Think/Prototype/Contracts/ServicePrototypeFactoryInterface.html">ServicePrototypeFactoryInterface</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Think/Verify</h3>
                <ul class="nav-list">
                    <li><a href="../../Think/Verify/VerifyPrototype.html">VerifyPrototype</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-title">Guidelines</h3>
                <ul class="nav-list">
                    <li><a href="../../../master-prompt.html">Master Prompt</a></li>
                </ul>
            </div>
        </nav>
    </aside>
    <main class="content">
        <section class="hero">
            <h1>KernelFacade</h1>
            <p>Public API Layer for Service Registration</p>
            <div class="meta">Foundation/Container/Core/Kernel/KernelFacade.php</div>
        </section>

        <section class="section">
            <h2>Class Overview</h2>
            <div class="card">
                <p>KernelFacade provides the user-facing API for service registration and binding. It offers fluent methods for binding services, configuring lifetimes, and setting up advanced features like extensions and contextual bindings.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To provide a clean, fluent API for service registration</p>
                    <p>- To encapsulate the complexity of service definitions and bindings</p>
                    <p>- To enable advanced features like extensions and contextual bindings</p>
                    <p>- To maintain separation between registration API and resolution logic</p>
                    <p><strong>HOW IT FITS IN THE ARCHITECTURE:</strong></p>
                    <p>The facade sits between the Container and the internal registration system:</p>
                    <p><code>Container</code> → <code>KernelFacade</code> → <code>DefinitionStore</code></p>
                    <p><code>KernelFacade</code> → <code>BindingBuilder</code> (fluent API)</p>
                    <p>It translates user-friendly method calls into internal data structures.</p>
                    <p><strong>FLUENT API DESIGN:</strong></p>
                    <p>Most methods return BindingBuilder instances for method chaining:</p>
                    <p><code>$container->bind(IFoo::class)->to(FooImpl::class)->inSingletonScope()</code></p>
                    <p>This enables expressive, readable service registration code.</p>
                </details>
            </div>
        </section>

        <section class="section">
            <h2>Application Registration Examples</h2>

            <div class="card">
                <h3>Basic Service Binding</h3>
                <pre><code class="language-php">// Bootstrap application services
$container = ContainerBuilder::create()->build();

// Bind interface to implementation
$container->bind(UserRepositoryInterface::class, DatabaseUserRepository::class);

// Bind with explicit lifetime
$container->bind(PaymentService::class, StripePaymentService::class);

// Use returned builder for advanced configuration
$container->bind(MailerInterface::class, SmtpMailer::class)
    ->withConstructorArgs(['smtp.example.com', 587])
    ->withProperty('timeout', 30);</code></pre>
            </div>

            <div class="card">
                <h3>Lifetime Management</h3>
                <pre><code class="language-php">// Singleton services (one instance for entire app)
$container->singleton(DatabaseConnection::class, PdoConnection::class);

// Scoped services (one instance per request/session)
$container->scoped(UserSession::class, HttpSession::class);

// Transient services (new instance each time)
$container->bind(ReportGenerator::class, PdfReportGenerator::class); // defaults to transient</code></pre>
            </div>

            <div class="card">
                <h3>Factory Functions</h3>
                <pre><code class="language-php">// Use closures for complex initialization
$container->bind(LoggerInterface::class, function() {
    $logger = new MonologLogger('app');
    $logger->pushHandler(new StreamHandler('logs/app.log'));
    return $logger;
});

// Bind to factory method
$container->bind(EntityManager::class, [DoctrineFactory::class, 'createEntityManager']);</code></pre>
            </div>

            <div class="card">
                <h3>Service Extensions (Decorators)</h3>
                <pre><code class="language-php">// Extend existing service with additional behavior
$container->bind(CacheInterface::class, RedisCache::class);

// Add logging decorator
$container->extend(CacheInterface::class, function($cache, $container) {
    return new LoggingCacheDecorator($cache, $container->get(Logger::class));
});

// Add metrics decorator
$container->extend(CacheInterface::class, function($cache, $container) {
    return new MetricsCacheDecorator($cache, $container->get(MetricsCollector::class));
});</code></pre>
            </div>

            <div class="card">
                <h3>Resolving Callbacks</h3>
                <pre><code class="language-php">// Execute code after service resolution
$container->resolving(DatabaseConnection::class, function($connection) {
    // Configure connection after creation
    $connection->setCharset('utf8mb4');
});

// Global resolving callback for all services
$container->resolving(function($service, $container) {
    // Log all service resolutions
    $container->get(Logger::class)->debug('Resolved: ' . get_class($service));
});</code></pre>
            </div>

            <div class="card">
                <h3>Contextual Bindings</h3>
                <pre><code class="language-php">// Different implementations based on consumer
interface SerializerInterface { }

class JsonSerializer implements SerializerInterface { }
class XmlSerializer implements SerializerInterface { }

// UserController gets JSON serializer
$container->when(UserController::class)
    ->needs(SerializerInterface::class)
    ->give(JsonSerializer::class);

// ApiController gets XML serializer
$container->when(ApiController::class)
    ->needs(SerializerInterface::class)
    ->give(XmlSerializer::class);</code></pre>
            </div>

            <div class="card">
                <h3>Instance Registration</h3>
                <pre><code class="language-php">// Register existing instances
$config = new AppConfig(['env' => 'production']);
$container->instance(AppConfig::class, $config);

// Useful for external libraries or pre-configured objects
$externalApi = new ExternalApiClient('api-key-123');
$container->instance(ExternalApiClient::class, $externalApi);</code></pre>
            </div>
        </section>

        <section class="section">
            <h2>Methods</h2>

            <div class="card" id="__construct">
                <h3>__construct</h3>
                <p>Initialize facade with core collaborators.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To establish connections to all registration-related services</p>
                    <p>- To provide access to definition store, scope manager, and utilities</p>
                    <p>- To enable the facade to coordinate service registration</p>
                    <p><strong>DEPENDENCY INJECTION:</strong></p>
                    <p>The facade receives all necessary collaborators:</p>
                    <p><em>DefinitionStore</em>: Where service definitions are stored</p>
                    <p><em>ScopeManager</em>: For managing instance lifetimes</p>
                    <p><em>ResolutionTimeline</em>: For tracking resolution metrics</p>
                    <p><em>ServicePrototypeFactory</em>: For creating service blueprints</p>
                    <p><em>Optional components</em>: Metrics, termination, and security policies</p>
                    <p><strong>READONLY DESIGN:</strong></p>
                    <p>The class is readonly, ensuring that facade behavior is predictable and collaborators cannot be accidentally modified.</p>
                </details>
            </div>

            <div class="card" id="bind">
                <h3>bind</h3>
                <p>Bind an abstract to a concrete implementation.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To provide the primary method for service registration</p>
                    <p>- To support interface-to-implementation mapping</p>
                    <p>- To enable dependency inversion in applications</p>
                    <p><strong>PARAMETER FLEXIBILITY:</strong></p>
                    <p>Accepts various concrete types:</p>
                    <p>- Class names: <code>'MyService'</code></p>
                    <p>- Closures: <code>fn() => new MyService()</code></p>
                    <p>- Null (autowiring): <code>null</code></p>
                    <p><strong>LIFETIME CONTROL:</strong></p>
                    <p>Supports all service lifetimes:</p>
                    <p>- Transient (default): New instance each resolution</p>
                    <p>- Singleton: One instance for entire application</p>
                    <p>- Scoped: One instance per scope boundary</p>
                    <p><strong>FLUENT API:</strong></p>
                    <p>Returns BindingBuilder for method chaining:</p>
                    <p><code>$container->bind(IFoo::class)->to(FooImpl::class)->withArgs(['param'])</code></p>
                </details>
            </div>

            <div class="card" id="singleton">
                <h3>singleton</h3>
                <p>Bind an abstract as a singleton.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To provide convenient singleton registration</p>
                    <p>- To ensure only one instance exists application-wide</p>
                    <p>- To support stateless services and shared resources</p>
                    <p><strong>WHEN TO USE SINGLETONS:</strong></p>
                    <p>- Database connections (connection pooling)</p>
                    <p>- Configuration objects</p>
                    <p>- Stateless services (loggers, validators)</p>
                    <p>- Expensive-to-create objects (caches, API clients)</p>
                    <p><strong>PERFORMANCE IMPLICATIONS:</strong></p>
                    <p>- Fast subsequent resolutions (cached instance)</p>
                    <p>- Reduced memory usage (shared instance)</p>
                    <p>- Potential thread-safety concerns</p>
                    <p><strong>IMPLEMENTATION:</strong></p>
                    <p>Internally calls bind() with ServiceLifetime::Singleton, providing the same fluent API for additional configuration.</p>
                </details>
            </div>

            <div class="card" id="scoped">
                <h3>scoped</h3>
                <p>Bind an abstract as scoped (per request).</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To provide request/session-scoped services</p>
                    <p>- To enable proper resource lifecycle management</p>
                    <p>- To support per-user or per-request state</p>
                    <p><strong>SCOPE BOUNDARIES:</strong></p>
                    <p>- Web requests: One instance per HTTP request</p>
                    <p>- CLI commands: One instance per command execution</p>
                    <p>- Queue jobs: One instance per job</p>
                    <p>- Custom scopes: Application-defined boundaries</p>
                    <p><strong>MEMORY MANAGEMENT:</strong></p>
                    <p>- Instances automatically disposed when scope ends</p>
                    <p>- Prevents memory leaks in long-running applications</p>
                    <p>- Enables proper cleanup of resources</p>
                    <p><strong>USE CASES:</strong></p>
                    <p>- User sessions and authentication</p>
                    <p>- Database transactions</p>
                    <p>- Request-scoped caches</p>
                    <p>- Per-request logging contexts</p>
                </details>
            </div>

            <div class="card" id="extend">
                <h3>extend</h3>
                <p>Extend an existing service with additional behavior.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To enable the decorator pattern for services</p>
                    <p>- To add cross-cutting concerns without modifying original code</p>
                    <p>- To support AOP (Aspect-Oriented Programming) style features</p>
                    <p><strong>DECORATOR PATTERN:</strong></p>
                    <p>Extensions wrap the original service:</p>
                    <p><code>OriginalService</code> → <code>LoggedService</code> → <code>MetricsService</code></p>
                    <p>Each extension receives the previous version and returns a decorated version.</p>
                    <p><strong>EXECUTION ORDER:</strong></p>
                    <p>Extensions execute in registration order:</p>
                    <p>1. Original service is resolved</p>
                    <p>2. First extension wraps it</p>
                    <p>3. Second extension wraps the result</p>
                    <p>4. Final wrapped service is returned</p>
                    <p><strong>COMMON USE CASES:</strong></p>
                    <p>- Logging service calls</p>
                    <p>- Adding performance metrics</p>
                    <p>- Implementing caching layers</p>
                    <p>- Adding security checks</p>
                </details>
            </div>

            <div class="card" id="resolving">
                <h3>resolving</h3>
                <p>Register a resolving callback for a service.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To execute code after service resolution</p>
                    <p>- To enable service initialization and configuration</p>
                    <p>- To support dependency injection without constructor modification</p>
                    <p><strong>CALLBACK TIMING:</strong></p>
                    <p>Callbacks execute immediately after resolution:</p>
                    <p>1. Service instance is created</p>
                    <p>2. Dependencies are injected</p>
                    <p>3. Resolving callbacks execute</p>
                    <p>4. Service is returned to caller</p>
                    <p><strong>TWO MODES:</strong></p>
                    <p><strong>Specific service callbacks:</strong></p>
                    <p><code>$container->resolving('MyService', function($service) { ... })</code></p>
                    <p><strong>Global callbacks:</strong></p>
                    <p><code>$container->resolving(function($service, $container) { ... })</code></p>
                    <p><strong>USE CASES:</strong></p>
                    <p>- Service initialization</p>
                    <p>- Configuration application</p>
                    <p>- Event triggering</p>
                    <p>- Validation and setup</p>
                </details>
            </div>

            <div class="card" id="when">
                <h3>when</h3>
                <p>Create a contextual binding builder.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To enable different implementations based on usage context</p>
                    <p>- To support dependency injection without configuration conflicts</p>
                    <p>- To allow consumer-specific service customization</p>
                    <p><strong>CONTEXT-AWARE RESOLUTION:</strong></p>
                    <p>Bindings can vary based on the consuming class:</p>
                    <p><code>Controller</code> → gets <code>ApiSerializer</code></p>
                    <p><code>Command</code> → gets <code>JsonSerializer</code></p>
                    <p><strong>FLUENT API:</strong></p>
                    <p>Returns ContextBuilder for method chaining:</p>
                    <p><code>$container->when(Controller::class)->needs(Serializer::class)->give(ApiSerializer::class)</code></p>
                    <p><strong>USE CASES:</strong></p>
                    <p>- Different serializers for different output formats</p>
                    <p>- Environment-specific service implementations</p>
                    <p>- Consumer-specific configurations</p>
                    <p>- Testing with alternative implementations</p>
                </details>
            </div>

            <div class="card" id="instance">
                <h3>instance</h3>
                <p>Register a singleton instance directly.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To register pre-configured or external objects</p>
                    <p>- To integrate with third-party libraries</p>
                    <p>- To override automatic resolution with specific instances</p>
                    <p><strong>INSTANCE STORAGE:</strong></p>
                    <p>Stores the instance directly in the scope manager:</p>
                    <p><code>$this->scopes->set(abstract: $abstract, instance: $instance)</code></p>
                    <p>Bypasses the normal resolution pipeline for this service.</p>
                    <p><strong>DEFINITION CREATION:</strong></p>
                    <p>Creates a singleton definition if one doesn't exist:</p>
                    <p>This ensures the service is properly registered in the definition store for introspection and tooling.</p>
                    <p><strong>USE CASES:</strong></p>
                    <p>- Pre-configured objects from bootstrap</p>
                    <p>- Third-party service instances</p>
                    <p>- Test doubles and mocks</p>
                    <p>- Legacy system integration</p>
                </details>
            </div>

            <div class="card" id="definitions">
                <h3>definitions</h3>
                <p>Get the definition store.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To provide access to service definitions for advanced use</p>
                    <p>- To enable tooling and introspection</p>
                    <p>- To support bootstrap and configuration systems</p>
                    <p><strong>WHAT IT PROVIDES:</strong></p>
                    <p>Access to all service definitions:</p>
                    <p>- Registered bindings and implementations</p>
                    <p>- Service lifetimes and configurations</p>
                    <p>- Extensions and resolving callbacks</p>
                    <p>- Contextual binding rules</p>
                    <p><strong>USE WITH CAUTION:</strong></p>
                    <p>Direct manipulation can break container invariants. Most applications should use the high-level facade methods instead.</p>
                </details>
            </div>

            <div class="card" id="scopes">
                <h3>scopes</h3>
                <p>Get the scope manager.</p>
                <details class="more">
                    <summary>More</summary>
                    <p><strong>WHY IT EXISTS:</strong></p>
                    <p>- To provide access to scope management for advanced scenarios</p>
                    <p>- To enable manual scope manipulation when needed</p>
                    <p>- To support scope inspection and debugging</p>
                    <p><strong>SCOPE MANAGEMENT:</strong></p>
                    <p>Provides access to:</p>
                    <p>- Current scope hierarchy</p>
                    <p>- Scoped instance storage</p>
                    <p>- Scope boundary control</p>
                    <p>- Instance disposal</p>
                    <p><strong>ADVANCED USE CASES:</strong></p>
                    <p>- Custom scope implementations</p>
                    <p>- Scope introspection for debugging</p>
                    <p>- Manual cleanup in testing scenarios</p>
                    <p>- Integration with custom frameworks</p>
                </details>
            </div>
        </section>
    </main>
</div>
</body>
</html>